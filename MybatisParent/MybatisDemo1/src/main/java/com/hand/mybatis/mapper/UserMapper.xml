<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace：命名空间，用于隔离sql，还有一个很重要的作用，后面会讲 -->
<mapper namespace="com.hand.mybatis.mapper.UserMapper">


    <select id="findUserById" parameterType="Integer" resultType="com.hand.mybatis.pojo.User">

        select * from user where id = #{v}

    </select>

    <select id="findUserByName" parameterType="QueryVo" resultType="User">

     select * from user where username like "%"#{user.username}"%"

    </select>

    <select id="selectUserBySexAndName" parameterType="User" resultType="User">

          select * from user
          <where>
              <if test="sex != null and sex !=''" >
                  sex = #{sex}
              </if>
              <if test="username != null and username != ''" >
                And  username = #{username}
              </if>
          </where>

    </select>

    <select id="findUserByIds" parameterType="QueryVo" resultType="User">

        select * from user
    <where>
    id in
        <foreach collection="list" item="id"  separator="," close=")" open="(" >
            #{id}
        </foreach>
    </where>


    </select>
    <resultMap id="listUser" type="User">
        <id column="id" property="id"></id>
        <result column="username" property="username"></result>
        <collection property="orderList" ofType="Order">
            <id column="user_id" property="userId"></id>
            <result column="number" property="number"></result>
            <result column="createtime" property="createtime"></result>
        </collection>
    </resultMap>

    <select id="LisetUser" resultMap="listUser">
      	SELECT
	 	o.id,
	    o.user_id,
	    o.number,
	 	o.createtime,
	 	u.username
	 	FROM user u
	 	left join orders o
	 	on o.user_id = u.id
    </select>


</mapper>