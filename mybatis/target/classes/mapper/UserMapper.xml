<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hand.mapper.UserMapper">
    <select id="getUserById" parameterType="java.util.Map" resultType="com.hand.domain.User">
        select * from user where id = #{map.id}
--         select * from user where username = '${map.id}'
    </select>
    <select id="getUserByUsername" parameterType="java.util.Map" resultType="com.hand.domain.User">
        select * from user where username like '%${map.username}%'
--         select * from user where username = '${map.id}'
    </select>
    <select id="getUserByUser" parameterType="java.util.Map" resultType="User">
        select * from user
        <where>
            <if test="map.user.id != null">
                and id = #{map.user.id}
            </if>
            <if test="map.user.username != null">
                and username like '%${map.user.username}%'
            </if>
            <if test="map.user.birthday != null">
                and birthday = #{map.user.birthday}
            </if>
            <if test="map.user.sex != null">
                and sex = #{map.user.sex}
            </if>
            <if test="map.user.address != null">
                and address like '%${map.user.address}%'
            </if>
        </where>
    </select>
<!--    自动生成主键-->
    <insert id="addUser" parameterType="java.util.Map" useGeneratedKeys="true" keyProperty="map.user.id" keyColumn="id">
        insert into user(username,birthday,sex,address)
        values(#{map.user.username},#{map.user.birthday},#{map.user.sex},#{map.user.address})
    </insert>

</mapper>