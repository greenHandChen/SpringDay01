<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- <mapper namespace="UserMapper">-->
<mapper namespace="com.hand.Mapper.UserMapper">


    <!-- selectUserById -->
    <select id="selectUserById" parameterType="java.lang.Integer" resultType="com.hand.Entity.User">

        SELECT * FROM `User` WHERE `id` = #{id};

    </select>

    <!-- selectUserByName -->
    <select id="selectUserByName" parameterType="java.lang.String" resultType="com.hand.Entity.User">

        SELECT * FROM `User` WHERE `username` LIKE '%${value}%';

    </select>

    <!-- insertUser -->

    <!-- 插入数据后返回该数据的主键 -->
    <!-- selectKey标签：查询主键 -->

    <!-- keyProperty属性：存在查询主键的位置 -->
    <!-- order属性：相对于插入数据的sql，查询主键sql的执行顺序（前 / 后） -->

    <!-- LAST_INSERT_ID()：mysql函数，返回最新插入的数据的id -->
    <!-- UUID()：mysql函数， 返回一个随机id（字符串类型） -->

    <insert id="insertUser" parameterType="com.hand.Entity.User">

        <selectKey keyProperty="id" resultType="java.lang.Integer" order="AFTER">

            SELECT LAST_INSERT_ID();

        </selectKey>

        INSERT
          INTO `user`
          (`username`, `sex`, `address`)
        VALUES
          (#{username}, #{sex}, #{address});

    </insert>

    <!-- deleteUser -->
    <delete id="deleteUser" parameterType="java.lang.Integer">

        DELETE FROM `user` WHERE `id` = #{id};

    </delete>

    <!-- updateUser -->
    <update id="updateUser" parameterType="com.hand.Entity.User">

        UPDATE `user` SET `username` = #{username} WHERE `id` = #{id};

    </update>

</mapper>